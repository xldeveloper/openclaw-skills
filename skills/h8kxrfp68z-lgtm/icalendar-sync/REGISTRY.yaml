# =============================================================================
# CLAWHUB REGISTRY METADATA
# This file is specifically for ClawHub registry/catalog indexing
# =============================================================================

# Skill Identity
skill:
  name: icalendar-sync
  display_name: "iCalendar Sync"
  version: "2.2.30"
  type: runtime  # NOT instruction-only

# Author & License
author:
  name: "Black_Temple"
  email: "contact@clawhub.ai"

license: MIT

repository:
  url: "https://github.com/h8kxrfp68z-lgtm/iCalendar-Sync"

# =============================================================================
# REQUIRED ENVIRONMENT VARIABLES (CRITICAL FOR REGISTRY)
# =============================================================================
environment_variables:
  required:
    - name: ICLOUD_USERNAME
      description: "Apple ID email address (e.g., user@icloud.com)"
      type: string
      sensitive: false
      example: "user@icloud.com"

    - name: ICLOUD_APP_PASSWORD
      description: "App-Specific Password from appleid.apple.com (NOT regular password)"
      type: string
      sensitive: true
      secure: true
      example: "xxxx-xxxx-xxxx-xxxx"
      notes: "Generate at: https://appleid.apple.com -> App-Specific Passwords"

  optional:
    - name: DEFAULT_CALENDAR
      description: "Default calendar name"
      type: string
      default: "Personal"

    - name: LOG_LEVEL
      description: "Logging level"
      type: string
      default: "INFO"
      allowed_values: ["DEBUG", "INFO", "WARNING", "ERROR"]

# Primary credential for security warnings
primary_credential: ICLOUD_APP_PASSWORD

# =============================================================================
# INSTALLATION
# =============================================================================
installation:
  type: script
  script: install.sh
  paths:
    - "~/.openclaw/skills/icalendar-sync/"
    - "~/.local/bin/icalendar-sync"

  requires:
    - Python >=3.9
    - pip (for dependencies)

# =============================================================================
# CAPABILITIES
# =============================================================================
description: "Professional iCloud Calendar integration for OpenClaw via CalDAV protocol. Supports bidirectional sync, recurring events, alarms, and multi-language calendar names including Cyrillic."

capabilities:
  - List iCloud calendars
  - Get calendar events with date filtering
  - Create calendar events with alarms
  - Delete calendar events
  - Recurring events (RRULE: DAILY, WEEKLY, MONTHLY, YEARLY)
  - Multi-language support (Cyrillic, Chinese, Arabic, etc.)
  - Timezone-aware datetime handling

# =============================================================================
# SECURITY
# =============================================================================
security:
  credential_storage: "OS keyring (macOS Keychain, Windows Credential Manager, Linux Secret Service)"

  network_access:
    endpoints:
      - "caldav.icloud.com:443 (Apple CalDAV server)"
      - "p??-caldav.icloud.com:443 (Apple CDN)"
    ssl_verification: enforced

  input_validation: true
  rate_limiting:
    max_calls: 10
    window_seconds: 60

  sensitive_data_filtering: true

# Security warnings for users
security_warnings:
  - "CRITICAL: Use App-Specific Password from appleid.apple.com, NOT your regular Apple ID password"
  - "Store credentials in OS keyring for maximum security"
  - "For Docker: use Docker secrets or external secrets manager"

# =============================================================================
# PLATFORM SUPPORT
# =============================================================================
platforms:
  - Linux
  - macOS
  - Windows

# =============================================================================
# METADATA VERSION
# =============================================================================
metadata_version: "1.0"
last_updated: "2026-02-12"
